{"ast":null,"code":"var _jsxFileName = \"/Users/yuitora./git_stuff/fruit_recognition/frontend/fruitai/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Camera, { FACING_MODES, IMAGE_TYPES } from 'react-html5-camera-photo';\nimport 'react-html5-camera-photo/build/css/index.css';\nimport ImagePreview from './ImagePreview';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App(props) {\n  _s();\n  const [dataUri, setDataUri] = useState('');\n  var convertToBase64 = function (url, imagetype, callback) {\n    var img = document.createElement('IMG'),\n      canvas = document.createElement('CANVAS'),\n      ctx = canvas.getContext('2d'),\n      data = '';\n    img.crossOrigin = 'Anonymous';\n    img.onLoad = function () {\n      canvas.height = this.height;\n      canvas.width = this.width;\n      ctx.drawImage(this, 0, 0);\n      data = canvas.toDataURL(imagetype);\n      callback(data);\n    };\n    img.src = url;\n  };\n  var sendBase64ToServer = function (name, base64) {\n    var httpPost = new XMLHttpRequest(),\n      path = \"http://138.195.242.46:8000/send/\" + name,\n      data = JSON.stringify({\n        image: base64\n      });\n    httpPost.onreadystatechange = function (err) {\n      if (httpPost.readyState == 4 && httpPost.status == 200) {\n        setDataUri(httpPost.responseText);\n      } else {\n        console.log(err);\n      }\n    };\n    httpPost.setHeader('Content-Type', 'application/json');\n    httpPost.open(\"POST\", path, true);\n    httpPost.send(data);\n  };\n  var uploadImage = function (src, name, type) {\n    convertToBase64(src, type, function (data) {\n      sendBase64ToServer(name, data);\n    });\n  };\n  async function handleTakePhoto(dataUri) {\n    uploadImage(dataUri, name, 'image/jpeg');\n  }\n  const isFullscreen = false;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: dataUri ? /*#__PURE__*/_jsxDEV(ImagePreview, {\n      dataUri: dataUri,\n      isFullscreen: isFullscreen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(Camera, {\n      onTakePhotoAnimationDone: handleTakePhoto,\n      isFullscreen: isFullscreen,\n      idealFacingMode: FACING_MODES.ENVIRONMENT\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 7\n  }, this);\n}\n_s(App, \"Z+NO0UjgWFHHSvRZi/lJ6Qa6p4o=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","Camera","FACING_MODES","IMAGE_TYPES","ImagePreview","App","props","dataUri","setDataUri","convertToBase64","url","imagetype","callback","img","document","createElement","canvas","ctx","getContext","data","crossOrigin","onLoad","height","width","drawImage","toDataURL","src","sendBase64ToServer","name","base64","httpPost","XMLHttpRequest","path","JSON","stringify","image","onreadystatechange","err","readyState","status","responseText","console","log","setHeader","open","send","uploadImage","type","handleTakePhoto","isFullscreen","ENVIRONMENT"],"sources":["/Users/yuitora./git_stuff/fruit_recognition/frontend/fruitai/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Camera, { FACING_MODES, IMAGE_TYPES } from 'react-html5-camera-photo';\nimport 'react-html5-camera-photo/build/css/index.css';\nimport ImagePreview from './ImagePreview';\n\n\n\nfunction App (props) {\n  const [dataUri, setDataUri] = useState('');\n\n  var convertToBase64 = function(url, imagetype, callback){\n\n    var img = document.createElement('IMG'),\n        canvas = document.createElement('CANVAS'),\n        ctx = canvas.getContext('2d'),\n        data = '';\n\n    img.crossOrigin = 'Anonymous'\n\n    img.onLoad = function(){\n      canvas.height = this.height;\n      canvas.width = this.width;\n      ctx.drawImage(this, 0, 0);\n      data = canvas.toDataURL(imagetype);\n      callback(data);\n    };\n\n    img.src = url;\n  };\n\n\n  var sendBase64ToServer = function(name, base64){\n    var httpPost = new XMLHttpRequest(),\n        path = \"http://138.195.242.46:8000/send/\" + name,\n        data = JSON.stringify({image: base64});\n    httpPost.onreadystatechange = function(err) {\n      if (httpPost.readyState == 4 && httpPost.status == 200){\n        setDataUri(httpPost.responseText);\n      } else {\n        console.log(err);\n      }\n    };\n    httpPost.setHeader('Content-Type', 'application/json');\n    httpPost.open(\"POST\", path, true);\n    httpPost.send(data);\n  };\n\n\n  var uploadImage = function(src, name, type){\n    convertToBase64(src, type, function(data){\n      sendBase64ToServer(name, data);\n    });\n  };\n\n  async function handleTakePhoto (dataUri) {\n    uploadImage(dataUri, name, 'image/jpeg')\n\n  }\n\n  const isFullscreen = false;\n  return (\n      <div>\n        {\n          (dataUri)\n              ? <ImagePreview dataUri={dataUri}\n                              isFullscreen={isFullscreen}\n              />\n              : <Camera onTakePhotoAnimationDone = {handleTakePhoto}\n                        isFullscreen={isFullscreen}\n                        idealFacingMode={FACING_MODES.ENVIRONMENT}\n              />\n        }\n      </div>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}